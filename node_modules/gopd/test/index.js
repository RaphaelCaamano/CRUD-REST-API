'use strict';

var test = require('tape');
var gopd = require('../');

test('gopd', function (t) {
	t.test('supported', { skip: !gopd }, function (st) {
		st.equal(typeof gopd, 'function', 'is a function');

		var obj = { x: 1 };
		st.ok('x' in obj, 'property exists');

		// @ts-expect-error TS can't figure out narrowing from `skip`
		var desc = gopd(obj, 'x');
		st.deepEqual(
			desc,
			{
				configurable: true,
				enumerable: true,
				value: 1,
				writable: true
			},
			'descriptor is as expected'
		);

		st.end();
	});

	t.test('not supported', { skip: !!gopd }, function (st) {
		st.notOk(gopd, 'is falsy');

		st.end();
	});

	t.end();
});
